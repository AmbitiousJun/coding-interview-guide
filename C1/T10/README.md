# 最大值减去最小值小于或等于 num 的子数组数量




## 描述

给定数组 arr 和整数 num，共返回有多少个子数组满足如下情况：

`max(arr[i...j]) - min(arr[i...j]) <= num`

`max(arr[i...j])`表示子数组 `arr[i...j]` 中的最大值，`min(arr[i...j])` 表示子数组 `arr[i...j]` 中的最小值。



要求：如果数组长度为 N，请实现时间复杂度为 O(N) 的解法。



## 总结

准备 i, j 两个变量表示区间左右端点并遍历 arr

在遍历的同时维护好 qmin 和 qmax 两个双端队列，维护方法与 C1-T7 题目一致

j 位置每向右扩一个位置时，就要对 qmin 和 qmax 的右端点进行维护

接着分别取出 qmin 和 qmax 的左端点 min 和 max，判断是否满足 `max - min <= num`

如果不满足，就可以结算出以 i 位置为左边界的满足题目条件的子区间个数 `j - i` 个

> 此时 j 位置处于第一个不满足条件的位置，也就是说符合条件的右边界的取值范围是 `[i, j)`
>
> 故而满足题目条件的子区间个数就为 `j - i` 个

然后 i 位置往右缩小一个位置

重复以上过程直到 arr 遍历完成，就统计出了所有满足题目条件的子区间个数