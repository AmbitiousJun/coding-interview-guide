# 求最大子矩阵的大小



## 描述

给定一个整型矩阵 map，其中的值只有 0 和 1 两种，求其中全是 1 的所有矩形区域中，最大的矩形区域为 1 的数量。

例如：

```shell
1   1   1   0
```

其中，最大的矩形区域有 3 个 1，所以返回 3

再如：

```shell
1   0   1   1
1   1   1   1
1   1   1   0
```

其中，最大的矩形区域有 6 个 1，所以返回 6



## 总结

假设题目的输入矩阵大小为 `N × M`，本题可以提供一个时间复杂度为 `O(N × M)`的解法

核心思路：

1. 从矩阵的第一行开始，往下遍历，同时维护 height 数组，每遍历到一行，都以该行为底，计算出该子矩阵的最大矩形大小

2. 通过 height 数组计算出最大矩形大小，借助 `单调栈` 结构来实现

   具体的，在遍历 height 数组时，维护好一个从底到顶单调递增的栈，栈中存放的是 height 的索引，假设遍历到 `i` 位置，当前栈顶元素为 `j` ，栈顶元素的下一个元素为 `k`(栈空则为 -1)：

   - `height[j] >= height[i]`：当前位置不能入栈，破坏了单调栈结构，必须弹出 j 位置，并根据 i 和 k 计算出当前 j 位置往左和往右能扩展出来的最大矩形大小，计算公式：`(i-k-1)*height[j]`
   - `height[j] < height[i] 或者栈空`：i 位置直接入栈

